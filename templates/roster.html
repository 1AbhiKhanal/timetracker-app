{% extends "base.html" %}
{% block content %}
<div class="card">
  <div class="card-header">
    <h3 class="mb-0">Weekly Roster</h3>
  </div>
  <div class="card-body">
    <div class="mb-3">
      <span class="text-muted small">{{ week_start.strftime('%d/%m/%Y') }} – {{ week_end.strftime('%d/%m/%Y') }}</span>
    </div>
    {% if roster_entries %}
      <div class="table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Employee</th>
              <th>Role</th>
              <th>Day</th>
              <th>Shift</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            {% for r in roster_entries %}
              <tr>
                <td>{{ users.get(r.user_id).name if users.get(r.user_id) else r.user_id }}</td>
                <td>{{ r.role_title or (users.get(r.user_id).position if users.get(r.user_id) else '-') }}</td>
                <td>{{ r.day_of_week }}</td>
                <td>
                  {% if r.is_off %}
                    Off
                  {% else %}
                    {{ r.start_time or '-' }} – {{ r.end_time or '-' }}
                  {% endif %}
                </td>
                <td>{{ r.notes or '-' }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="text-muted">No roster entries yet.</div>
    {% endif %}
  </div>
</div>
{% endblock %}
